# Session 09 ‚Äì Step 3: Logging, Feedback Loops, and Regression Tracking

üìå This file contains raw, unedited training content including full prompts, inputs, outputs, and feedback.

## üéØ Goal
Design a structured JSON log format to track and classify AI QA test runs. This helps support:
- Automated logging
- Feedback loops
- Regression testing
- Evaluation of test accuracy

---

## ‚úÖ Target JSON Fields & Meanings

| Field | Description |
|-------|-------------|
| `prompt` | The exact instruction given to the LLM or AI Copilot. |
| `fixture_input` | The test fixture or input data given along with the prompt. Can be a Gherkin snippet, structured data, or plain text. |
| `llm_output` | The output generated by the AI in response to the prompt and input. |
| `match_type` | The strategy used to evaluate the output (e.g., `"exact-title-match"`, `"keyword-inclusion"`, `"summary-contains-key-requirements"`). |
| `oracle_verdict` | The expected outcome from a domain expert (usually `"pass"` or `"fail"`). |
| `assertion_verdict` | The programmatic or automated check's result (usually `"pass"` or `"fail"`). |
| `result_classification` | The classification of the result: `"TP"` (True Positive), `"FP"` (False Positive), `"FN"` (False Negative), `"TN"` (True Negative). |
| `comments` | Optional notes or clarification to explain why the result was classified a certain way. |

---

## üß™ Exercise 1: Gherkin-Based Test Case Title Extraction

### Prompt:
```
Extract all test case titles from the following Gherkin feature file.
```

### Fixture Input:
```gherkin
Feature: Login Functionality
  Scenario: Valid user logs in successfully
    Given the user is on the login page
    When the user enters correct credentials
    Then they are redirected to the dashboard

  Scenario: Login fails with incorrect password
    Given the user is on the login page
    When the user enters an incorrect password
    Then an error message is displayed
```

### Oracle titles:
- "Valid user logs in successfully"
- "Login fails with incorrect password"

*User was asked to create a full JSON log for this.*

---

## üß™ User Submission Attempt 1

```json
{
  "summary": "act as action and log reviewer, verify all the login inputs and log all good and bad login attempts",
  "fixture_input": "make sure the valid input of user name and password entered",
  "LLM_output": "successful login attempt is processed",
  "match_type": "right username and password have alpha numeric and @ special charater is provided",
  "oracle_verdit": pass,
  "assertion_verdict": pass,
  "result_clasification": "TP",
  "comments": "after successful login verification done and dashboard displayed and if unsuccessful login, share the login page error message"
}
```

### üîç Feedback & Corrections:
- Field keys like `summary`, `oracle_verdit`, and `result_clasification` were misspelled or not part of the target schema.
- Values like `pass` must be strings, i.e., `"pass"`.
- Semantic meaning of `match_type` was unclear.
- Field `summary` should be renamed to `prompt`.

---

## ‚úÖ Corrected Version for Exercise 1:

```json
{
  "prompt": "Verify login behavior for valid and invalid user credentials and log all attempts.",
  "fixture_input": "Given a valid username 'john_doe' and password 'Pass@123', ensure successful login. For invalid password 'wrongpass', show error message.",
  "llm_output": "Successful login for john_doe is logged. Incorrect password attempt results in error message display.",
  "match_type": "login-behavior-validation",
  "oracle_verdict": "pass",
  "assertion_verdict": "pass",
  "result_classification": "TP",
  "comments": "Verified both success and failure paths. Dashboard appears on success, error message shown on failure."
}
```

---

## üß™ Exercise 2: Password Reset Requirement

### Prompt:
```
Generate a test case summary for the given requirement.
```

### Fixture Input:
```
Requirement: The system must allow users to reset their password using a registered email address, and receive a secure link that expires in 15 minutes.
```

---

## üß™ User Submission Attempt 2

```json
{
  "prompt": "Act as system, provide user with reset password link to their registered email id when requested and make sure provide instructions that link expires in 15 min",
  "fixture_input": "Given the email id of user within reset page for reset password link button press, send an email with reset password link and provide instruction that link will be expired in 15 min. Log all attempts of reset password attempts of the user.",
  "LLM_output": "Verified the password reset (for a registered email id) was successful and if invalid user password or user attempts expired link, make verify the error message provided to user to do one more reset request",
  "match_type": "Password-reset-validation",
  "oracle_verdict": "Pass",
  "assertion_verdict": "Pass",
  "result_classification": "verify the Successfull when user reset password within 15min and Unsuccessfull atempts done with error message",
  "comments": "make sure the user requested reset password link for a registered email and completes reset password process within 15 min of link shared"
}
```

---

### üîç Feedback & Corrections:
- `result_classification` must be a short classification (`"TP"`, `"FP"`, etc.), not a sentence.
- Fixed spelling, grammar, and phrasing for clarity.
- Normalized `match_type` for better reuse.

---

## ‚úÖ Final Corrected Log Entry ‚Äì Password Reset Case

```json
{
  "prompt": "Act as system. Provide user with a password reset link to their registered email ID when requested. Include instructions that the link expires in 15 minutes.",
  "fixture_input": "Given the email ID of the user on the reset page, when the user presses the reset password button, send an email with the reset link. Include instructions that the link expires in 15 minutes. Log all reset password attempts.",
  "llm_output": "Verified the password reset (for a registered email ID) was successful. If the user uses an expired link or is unregistered, an error message is displayed prompting them to retry the reset request.",
  "match_type": "summary-contains-key-requirements",
  "oracle_verdict": "pass",
  "assertion_verdict": "pass",
  "result_classification": "TP",
  "comments": "Confirmed that reset links were sent only to registered emails, the 15-minute expiration was enforced, and appropriate messages were shown for expired or invalid links."
}
```

---

# Session 09 ‚Äì Step 4: Feedback Loop Mechanics & Test Memory

üìå This file contains raw, unedited training content including full prompts, inputs, outputs, and feedback.

## üéØ Goal
Understand how to:
- Create feedback loops that improve LLM behavior over time.
- Store and replay test memory to detect regressions or fine-tune prompts.

---

## üîç Core Concepts

### 1. Feedback Loop Design

A feedback loop collects results from test logs and uses them to:
- Tune prompts
- Select few-shot examples
- Build memory-aware AI agents

Each feedback loop entry contains:
- Observation
- Evaluation (oracle + assertion)
- Classification (TP/FP/FN/TN)
- Response (improve, retry, log pattern)

### 2. Test Memory Storage

Test memories include:
- Prior prompts, inputs, and verdicts
- Known failures and edge cases
- Expected outputs

Can be stored as:
- JSON logs
- Vector stores (for semantic memory)
- YAML snapshots

---

## üß™ Exercise 1 ‚Äì Medical Domain (False Negative)

### Raw User Submission

```json
{
  "test_id":"01-validate-patient-profile-ALK",
  "prompt":"Act as medical professional that review paitent profile for patients tumor profile and share summary in 2-3 sentances usign relevant biomarkers. Also review the ALK mutation is being omitted report",
  "fixture_input":"summary-contains-key-requirements",
  "llm_output":"for the given input, if the summary missing ALK mutation, system should return tumor is not able to confirm",
  "oracle_verdit":"fail",
  "assertion_verdit":"fail",
  "result_classifaction":"FN",
  "issue_identified":"ALK mutation is missing from summary",
  "suggested_fix":"Act as patient information review specialist, verify paitents records and make sure ALK mutation information is captured durign process, gather or ask any inputs are needed",
  "feedback_action":"record all actions perfomred while analysiing the patient informaiton and store the inputs, outputs, processing time, and attempts done to get right information"
}
```

### ‚úÖ Cleaned Feedback Entry

```json
{
  "test_id": "01-fn-alk-mutation",
  "prompt": "Act as a medical professional reviewing a patient's tumor profile. Summarize the case in 2‚Äì3 sentences using relevant biomarkers. Ensure ALK mutation is not omitted.",
  "fixture_input": "Patient profile includes ALK mutation along with EGFR and TP53. Summarize key mutations and tumor type in 2‚Äì3 sentences.",
  "llm_output": "The patient‚Äôs profile includes EGFR and TP53 mutations. The tumor shows advanced progression.",
  "oracle_verdict": "fail",
  "assertion_verdict": "fail",
  "result_classification": "FN",
  "issue_identified": "ALK mutation is missing from the summary.",
  "suggested_fix": "Rephrase the prompt to explicitly require ALK inclusion, or provide an example that includes ALK to encourage the model to generalize better.",
  "feedback_action": "Add this case to memory. Tag it as a known failure. In the next few-shot prompt, include a TP example that covers ALK mutation."
}
```

---

## üß™ Exercise 2 ‚Äì Software Testing Domain (False Negative)

### Raw User Submission

```json
{
  "test_id":"01-validate-app-crash-issues",
  "prompt":"Act as test steps reviewer expert, verify the app open status and also review the file name size of the pdf, record the uploading action and verify if the app has any memory issue or crashing",
  "fixture_input":"given user uploading pdf file file and its file name length, system missing validation file name length, thrown warning message when file name length is greater than 50 letters including spaces",
  "oracle_verdit":"fail",
  "assertion_verdit":"fail",
  "result_classifaction":"FN",
  "issue_identified":"LLM need to make sure the PDF filename length and file size that is uploading, need to have configuration setting for limitations",
  "suggested_fix":"share recommendations for app owner, that there is thresholds/limitation of uploading pdf file name length and file size try to upload, share importance and problems comes around",
  "feedback_action":"to avoid future issues, record all case sceanrios that happend for both positve and negative user inputs and log all entries and improve the prompts for better application performance"
}
```

### ‚úÖ Cleaned Feedback Entry

```json
{
  "test_id": "01-validate-app-crash-issues",
  "prompt": "Extract the test steps from this bug report in a structured list.",
  "fixture_input": "Bug Title: ‚ÄúApp crashes when uploading PDF with long filename‚Äù\nDescription: Open the app and go to the upload screen. Select a PDF file whose name is more than 255 characters. Click upload. The app crashes and restarts.\nExpected: App should show a warning if the filename is too long, or handle the upload gracefully.",
  "llm_output": "1. Open the app\n2. Go to upload screen\n3. Select PDF\n4. Click upload",
  "oracle_verdict": "fail",
  "assertion_verdict": "fail",
  "result_classification": "FN",
  "issue_identified": "LLM omitted the key condition that the filename was over 255 characters and triggered the crash. It failed to capture the cause.",
  "suggested_fix": "Clarify the prompt to emphasize the importance of edge-case inputs such as filename length. Add a few-shot example that includes a long filename crash case.",
  "feedback_action": "Log this as a known edge-case omission. Tag as 'long filename crash'. Add to regression memory. Improve prompt examples to reflect length-based file handling limitations."
}
```

---

# Session 09 ‚Äì Step 5: Regression Detection and Replay Memory  
üìå This file contains raw, unedited training content including full prompts, inputs, outputs, and feedback.

---

## üéØ Training Content

**Step 5 Objective:**  
Build a memory log format to capture when previously failed tests start passing in new versions of the LLM or agent. This is key for regression **detection**, **confirmation**, and **resolution tracking**.

**Scenario Recap:**
- `test_id: 02-reset-link-expiry`
- Initially failed (false negative)
- Retested in version `v2.0.1`, passed correctly
- Log this result for replay memory and history tracking

---

## üß™ Exercise ‚Äì Write a Replay Log Entry

### üßæ User Input

```json
{
  "test_id": "02-reset-link-expiry",
  "version": "v2.0.1",
  "prompt": "Act as test engineer, the retest of this test cases is verified with new version and resulted with True positive. Record the this logs in the memory and create log entry of results.",
  "fixture_input": "Given new version resulted the test is positive, verify the previous results with this result and provide map of change of status of test result",
  "current_llm_output": "Model returns the test result is positive",
  "expected_match_type": "fuzzy_contains",
  "last_known_verdict": "FAIL",
  "current_verdict": "PASS",
  "regression_detected": false,
  "notes": "Act as AI agent and understand the test result of existing with v2.0.0 and v2.0.1, test result changed. update model knowledge with this new test result. As the system upgrades, resolves existing bugs/defects fixes. Next time, review test results of same test from memory and provide clear guidence of failure reson and which version is solved. Track the failures of same test in different releases. so, that we can have history of the same test."
}
```

---

## ‚úÖ Feedback

Your replay log is excellent. Specific highlights:

- ‚úÖ Captured the **test_id**, **version**, and **match type** clearly  
- ‚úÖ Included both **last_known_verdict** and **current_verdict**
- ‚úÖ `regression_detected: false` is correct since this is a resolution, not a reappearance
- ‚úÖ Good metadata in `notes` about prompting behavior and historical tracking

### Suggested Refinements (optional):

To maximize automation and agent replayability:
- Use cleaner language in `prompt` for better reproducibility in test agents
- Standardize `notes` field into bullet points for agents to parse



---

---

# Session 09 ‚Äì Step 6: Regression Labels and Replay Heuristics  
üìå This file contains raw, unedited training content including full prompts, inputs, outputs, and feedback.

---

## üéØ Training Content

**Step 6 Objectives**

1. Label regressions using structured tags like:
   - `resolved_in_version`, `false_negative`, `prompt_fixed`, etc.
2. Define replay heuristics such as:
   - `skip_if_passing`, `retest_if_prompt_changes`, etc.
3. Score test case stability using a `confidence_score`

---

## üß™ Exercise ‚Äì Label Your Replay Entry

### üßæ User Input

```json
{
  "regression_label": "resolved_in_version",
  "replay_heuristic": "skip_if_passing",
  "confidence_score": 6.0,
  "note": "as this is low priority verfication test case, we can rerun only when regression is initiated or any software new release or code version is releases."
}
```

---

## ‚úÖ Feedback

- ‚ö†Ô∏è `confidence_score` must be a float between **0.0 and 1.0** ‚Äì value `6.0` is invalid
- ‚úÖ Good use of `replay_heuristic` and `regression_label`
- ‚úÖ Reasoning was clear and practical ‚Äì included in final `notes`

---

### üõ†Ô∏è Corrected Output

```json
{
  "regression_label": "resolved_in_version",
  "replay_heuristic": "skip_if_passing",
  "confidence_score": 0.6,
  "notes": "As this is a low-priority verification test case, we can rerun only when regression is initiated or a new software/code version is released."
}
```

---
